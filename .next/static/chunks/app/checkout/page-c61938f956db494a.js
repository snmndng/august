(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{1165:(e,t,r)=>{"use strict";r.d(t,{_:()=>c,e:()=>d});var s=r(5155),a=r(2115);let l={items:[],totalItems:0,totalPrice:0,isOpen:!1};function i(e){return"string"==typeof e?parseFloat(e):"number"==typeof e?e:e&&"object"==typeof e&&"toNumber"in e?e.toNumber():0}function o(e,t){switch(t.type){case"ADD_ITEM":{let r,{product:s,quantity:a}=t.payload,l=e.items.findIndex(e=>e.product.id===s.id);if(l>=0)r=e.items.map((e,t)=>t===l?{...e,quantity:e.quantity+a}:e);else{let t={id:"".concat(s.id,"-").concat(Date.now()),product:s,quantity:a,addedAt:new Date};r=[...e.items,t]}let o=r.reduce((e,t)=>e+t.quantity,0),n=r.reduce((e,t)=>e+i(t.product.price)*t.quantity,0);return{...e,items:r,totalItems:o,totalPrice:n}}case"REMOVE_ITEM":{let{productId:r}=t.payload,s=e.items.filter(e=>e.product.id!==r),a=s.reduce((e,t)=>e+t.quantity,0),l=s.reduce((e,t)=>e+i(t.product.price)*t.quantity,0);return{...e,items:s,totalItems:a,totalPrice:l}}case"UPDATE_QUANTITY":{let{productId:r,quantity:s}=t.payload,a=e.items.map(e=>e.product.id===r?{...e,quantity:Math.max(0,s)}:e).filter(e=>e.quantity>0),l=a.reduce((e,t)=>e+t.quantity,0),o=a.reduce((e,t)=>e+i(t.product.price)*t.quantity,0);return{...e,items:a,totalItems:l,totalPrice:o}}case"CLEAR_CART":return{...e,items:[],totalItems:0,totalPrice:0};case"TOGGLE_CART":return{...e,isOpen:!e.isOpen};case"CLOSE_CART":return{...e,isOpen:!1};case"LOAD_CART":let r=t.payload,s=r.reduce((e,t)=>e+t.quantity,0),a=r.reduce((e,t)=>e+i(t.product.price)*t.quantity,0);return{...e,items:r,totalItems:s,totalPrice:a};default:return e}}let n=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[r,i]=(0,a.useReducer)(o,l);return(0,a.useEffect)(()=>{try{let e=localStorage.getItem("luxiormall-cart");if(e){let t=JSON.parse(e).map(e=>({...e,addedAt:new Date(e.addedAt)}));i({type:"LOAD_CART",payload:t})}}catch(e){console.error("Error loading cart from localStorage:",e)}},[]),(0,a.useEffect)(()=>{try{localStorage.setItem("luxiormall-cart",JSON.stringify(r.items))}catch(e){console.error("Error saving cart to localStorage:",e)}},[r.items]),(0,s.jsx)(n.Provider,{value:{state:r,addItem:(e,t)=>{i({type:"ADD_ITEM",payload:{product:e,quantity:t}})},removeItem:e=>{i({type:"REMOVE_ITEM",payload:{productId:e}})},updateQuantity:(e,t)=>{i({type:"UPDATE_QUANTITY",payload:{productId:e,quantity:t}})},clearCart:()=>{i({type:"CLEAR_CART"})},toggleCart:()=>{i({type:"TOGGLE_CART"})},closeCart:()=>{i({type:"CLOSE_CART"})},getItemQuantity:e=>{let t=r.items.find(t=>t.product.id===e);return t?t.quantity:0}},children:t})}function c(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},1873:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5105).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3003:(e,t,r)=>{"use strict";r.d(t,{CheckoutForm:()=>c});var s=r(5155),a=r(2115),l=r(1165),i=r(8519),o=r(9141),n=r(1873),d=r(9708);function c(){let{state:e,clearCart:t}=(0,l._)(),[r,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:""}),x=e=>{let t;return t="string"==typeof e?parseFloat(e):"number"==typeof e?e:e&&"object"==typeof e&&"toNumber"in e?e.toNumber():0,new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(t)},p=e=>{let{name:t,value:r}=e.target;m(e=>({...e,[t]:r}))},g=async r=>{if(r.preventDefault(),0===e.items.length)return void alert("Your cart is empty");c(!0);try{console.log("Processing checkout:",{formData:u,cart:e.items}),await new Promise(e=>setTimeout(e,3e3)),alert("Payment processed successfully! (This is a demo)"),t()}catch(e){console.error("Checkout error:",e),alert("Payment failed. Please try again.")}finally{c(!1)}};return 0===e.items.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-luxior-accent rounded-full flex items-center justify-center dark:bg-luxior-black",children:(0,s.jsx)(i.A,{size:24,className:"text-luxior-deep-orange"})}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6 dark:text-gray-400",children:"Add some products to your cart to proceed with checkout"}),(0,s.jsx)("a",{href:"/products",className:"btn-primary inline-block w-full py-3 text-lg",children:"Continue Shopping"})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 bg-background text-foreground dark:bg-luxior-black dark:text-luxior-white",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Shipping Information"}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium mb-1",children:"First Name *"}),(0,s.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:u.firstName,onChange:p,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-luxior-deep-orange focus:border-transparent bg-background text-foreground"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium mb-1",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:u.lastName,onChange:p,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-luxior-deep-orange focus:border-transparent bg-background text-foreground"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email Address *"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:p,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-luxior-deep-orange focus:border-transparent bg-background text-foreground"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium mb-1",children:"Phone Number (M-Pesa) *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"tel",id:"phone",name:"phone",value:u.phone,onChange:p,placeholder:"254700000000",required:!0,className:"w-full pl-10 pr-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-luxior-deep-orange focus:border-transparent bg-background text-foreground"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium mb-1",children:"Address *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",id:"address",name:"address",value:u.address,onChange:p,required:!0,className:"w-full pl-10 pr-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-luxior-deep-orange focus:border-transparent bg-background text-foreground"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium mb-1",children:"City *"}),(0,s.jsx)("input",{type:"text",id:"city",name:"city",value:u.city,onChange:p,required:!0,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-luxior-deep-orange focus:border-transparent bg-background text-foreground"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"postalCode",className:"block text-sm font-medium mb-1",children:"Postal Code"}),(0,s.jsx)("input",{type:"text",id:"postalCode",name:"postalCode",value:u.postalCode,onChange:p,className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-luxior-deep-orange focus:border-transparent bg-background text-foreground"})]})]}),(0,s.jsx)("button",{type:"submit",disabled:r,className:"btn-primary w-full py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing Payment..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{size:20}),"Pay with M-Pesa"]})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 h-fit",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:e.items.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex gap-4 p-4 bg-luxior-accent rounded-lg dark:bg-luxior-black",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-luxior-accent rounded-lg flex items-center justify-center flex-shrink-0 dark:bg-luxior-black",children:(0,s.jsx)("span",{className:"text-gray-400 text-xs dark:text-gray-500",children:"Image"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium truncate",children:e.product.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Qty: ",e.quantity]}),(0,s.jsx)("p",{className:"text-sm font-medium",children:x(("string"==typeof(t=e.product.price)?parseFloat(t):"number"==typeof t?t:t&&"object"==typeof t&&"toNumber"in t?t.toNumber():0)*e.quantity)})]})]},e.id)})}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Subtotal (",e.totalItems," items):"]}),(0,s.jsx)("span",{className:"font-medium",children:x(e.totalPrice)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Delivery:"}),(0,s.jsx)("span",{className:"font-medium text-luxior-success",children:"Free"})]}),(0,s.jsx)("div",{className:"border-t border-border pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsx)("span",{children:x(e.totalPrice)})]})})]}),(0,s.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(d.A,{size:20,className:"text-luxior-info mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-luxior-info mb-1",children:"Secure Checkout"}),(0,s.jsx)("p",{className:"text-sm text-luxior-info",children:"Your payment information is encrypted and secure. We use M-Pesa's secure payment gateway."})]})]})})]})]})}},3391:(e,t,r)=>{Promise.resolve().then(r.bind(r,3003))},5105:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(2115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:u,...m}=r;return(0,s.createElement)("svg",{ref:l,...a,width:o,height:o,stroke:i,strokeWidth:d?24*Number(n)/Number(o):n,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),c].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},8519:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5105).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},9141:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5105).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9708:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5105).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[441,255,358],()=>e(e.s=3391)),_N_E=e.O()}]);