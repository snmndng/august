(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{166:(e,t,s)=>{"use strict";s.d(t,{ProductFilters:()=>c});var r=s(5155),a=s(2115);let l=(0,s(5105).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var i=s(4033);function c(e){let{onFiltersChange:t}=e,[s,c]=(0,a.useState)({priceRange:[0,1e5],categories:[],inStock:!1,featured:!1,bestseller:!1}),[n,o]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[x,g]=(0,a.useState)({price:!0,categories:!0,features:!0});(0,a.useEffect)(()=>{(async()=>{try{o([{id:"cat1",name:"Shoes",slug:"shoes",is_active:!0,sort_order:1,created_at:"",updated_at:""},{id:"cat2",name:"Electronics",slug:"electronics",is_active:!0,sort_order:2,created_at:"",updated_at:""},{id:"cat3",name:"Fashion",slug:"fashion",is_active:!0,sort_order:3,created_at:"",updated_at:""},{id:"cat4",name:"Home & Garden",slug:"home-garden",is_active:!0,sort_order:4,created_at:"",updated_at:""}])}catch(e){console.error("Error fetching categories:",e)}finally{u(!1)}})()},[]),(0,a.useEffect)(()=>{null==t||t(s)},[s,t]);let m=e=>{g(t=>({...t,[e]:!t[e]}))},h=(e,t)=>{c(s=>({...s,priceRange:[e,t]}))},b=e=>{c(t=>({...t,[e]:!t[e]}))},p=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(e);return d?(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,r.jsx)(l,{size:20,className:"text-gray-600"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[(0,r.jsxs)("button",{onClick:()=>m("price"),className:"flex items-center justify-between w-full text-left font-medium text-gray-900 mb-3",children:["Price Range",(0,r.jsx)(i.A,{size:16,className:"transition-transform ".concat(x.price?"rotate-180":"")})]}),x.price&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Min:"}),(0,r.jsx)("input",{type:"number",value:s.priceRange[0],onChange:e=>h(Number(e.target.value),s.priceRange[1]),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Max:"}),(0,r.jsx)("input",{type:"number",value:s.priceRange[1],onChange:e=>h(s.priceRange[0],Number(e.target.value)),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100000"})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Range: ",p(s.priceRange[0])," - ",p(s.priceRange[1])]})]})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[(0,r.jsxs)("button",{onClick:()=>m("categories"),className:"flex items-center justify-between w-full text-left font-medium text-gray-900 mb-3",children:["Categories",(0,r.jsx)(i.A,{size:16,className:"transition-transform ".concat(x.categories?"rotate-180":"")})]}),x.categories&&(0,r.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:s.categories.includes(e.id),onChange:t=>{var s,r;return s=e.id,r=t.target.checked,void c(e=>({...e,categories:r?[...e.categories,s]:e.categories.filter(e=>e!==s)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[(0,r.jsxs)("button",{onClick:()=>m("features"),className:"flex items-center justify-between w-full text-left font-medium text-gray-900 mb-3",children:["Features",(0,r.jsx)(i.A,{size:16,className:"transition-transform ".concat(x.features?"rotate-180":"")})]}),x.features&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:s.inStock,onChange:()=>b("inStock"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"In Stock Only"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:s.featured,onChange:()=>b("featured"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Featured Products"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:s.bestseller,onChange:()=>b("bestseller"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Best Sellers"})]})]})]}),(0,r.jsx)("button",{onClick:()=>{c({priceRange:[0,1e5],categories:[],inStock:!1,featured:!1,bestseller:!1})},className:"w-full py-2 px-4 text-sm text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear All Filters"})]})}},4033:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(5105).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5876:(e,t,s)=>{"use strict";s.d(t,{LoadingSpinner:()=>l});var r=s(5155);let a=(0,s(5105).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function l(e){let{size:t="md",className:s=""}=e;return(0,r.jsx)("div",{className:"flex justify-center items-center ".concat(s),children:(0,r.jsx)(a,{className:"animate-spin text-luxior-deep-orange ".concat({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t])})})}},7008:(e,t,s)=>{Promise.resolve().then(s.bind(s,5876)),Promise.resolve().then(s.bind(s,166)),Promise.resolve().then(s.bind(s,8570)),Promise.resolve().then(s.bind(s,9030))},8570:(e,t,s)=>{"use strict";s.d(t,{ProductGrid:()=>c});var r=s(5155),a=s(2115),l=s(5604),i=s(5876);function c(e){let{categoryId:t,searchQuery:s}=e,[c,n]=(0,a.useState)([]),[o,d]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{d(!0);let e=new URLSearchParams;t&&e.append("categoryId",t),s&&e.append("searchQuery",s);let r=await fetch("/api/products?".concat(e.toString()));if(!r.ok)throw Error("Failed to fetch products");let a=await r.json();n(a.products||[])}catch(e){x("Failed to fetch products"),console.error("Error fetching products:",e)}finally{d(!1)}})()},[t,s]),o)?(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)(i.LoadingSpinner,{})}):u?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-red-600 text-lg",children:u}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):0===c.length?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"No products found"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:c.map(e=>(0,r.jsx)(l.A,{product:e},e.id))})}},9030:(e,t,s)=>{"use strict";s.d(t,{ProductSort:()=>o});var r=s(5155),a=s(2115),l=s(4033),i=s(5105);let c=(0,i.A)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),n=(0,i.A)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);function o(e){var t;let{onSortChange:s,onViewChange:i,totalProducts:o=0}=e,[d,u]=(0,a.useState)("newest"),[x,g]=(0,a.useState)("grid"),[m,h]=(0,a.useState)(!1),b=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"},{value:"popularity",label:"Most Popular"},{value:"rating",label:"Highest Rated"}],p=e=>{g(e),null==i||i(e)};return(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[o," product",1!==o?"s":""," found"]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>h(!m),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("span",{children:(null==(t=b.find(e=>e.value===d))?void 0:t.label)||"Sort by"}),(0,r.jsx)(l.A,{size:16,className:"transition-transform ".concat(m?"rotate-180":"")})]}),m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>h(!1)}),(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:b.map(e=>(0,r.jsx)("button",{onClick:()=>{var t;u(t=e.value),h(!1),null==s||s(t)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 transition-colors ".concat(d===e.value?"bg-blue-50 text-blue-700":"text-gray-700"),children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden",children:[(0,r.jsx)("button",{onClick:()=>p("grid"),className:"p-2 transition-colors ".concat("grid"===x?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"),title:"Grid view",children:(0,r.jsx)(c,{size:18})}),(0,r.jsx)("button",{onClick:()=>p("list"),className:"p-2 transition-colors ".concat("list"===x?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-50"),title:"List view",children:(0,r.jsx)(n,{size:18})})]})]})]})}}},e=>{e.O(0,[619,604,441,255,358],()=>e(e.s=7008)),_N_E=e.O()}]);